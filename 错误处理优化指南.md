# VideoPlayer é”™è¯¯å¤„ç†ä¼˜åŒ–æŒ‡å—

## ğŸ”§ é—®é¢˜è§£å†³

### åŸå§‹é—®é¢˜
æ‚¨é‡åˆ°çš„æ§åˆ¶å°é”™è¯¯ä¿¡æ¯ï¼š
```
âš ï¸ HLSé”™è¯¯: [object Object]
â–¶ï¸ è§†é¢‘å¯ä»¥æ’­æ”¾
```

### è§£å†³æ–¹æ¡ˆ
å·²å¯¹VideoPlayerç»„ä»¶è¿›è¡Œäº†å…¨é¢ä¼˜åŒ–ï¼š

## ğŸ¯ ä¼˜åŒ–å†…å®¹

### 1. é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºä¼˜åŒ–
**ä¹‹å‰**: é”™è¯¯å¯¹è±¡æ˜¾ç¤ºä¸º`[object Object]`
**ç°åœ¨**: æ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

```javascript
// ä¼˜åŒ–å‰
console.log('âš ï¸ HLSé”™è¯¯:', data)

// ä¼˜åŒ–å
console.log('âš ï¸ HLSé”™è¯¯è¯¦æƒ…:', {
  type: data.type,
  details: data.details,
  fatal: data.fatal,
  reason: data.reason || 'æœªçŸ¥åŸå› ',
  url: data.url || 'æœªçŸ¥URL',
  errorRate: errorStatistics.getStats().errorRate
})
```

### 2. æ™ºèƒ½é”™è¯¯è¿‡æ»¤
**åŠŸèƒ½**: è‡ªåŠ¨è¿‡æ»¤éå…³é”®é”™è¯¯ï¼Œé˜²æ­¢æ§åˆ¶å°è¢«åˆ·å±

```javascript
// è¢«è¿‡æ»¤çš„é”™è¯¯ç±»å‹
const ignorableErrors = [
  'fragLoadError',     // ç‰‡æ®µåŠ è½½é”™è¯¯ï¼ˆé€šå¸¸ä¼šè‡ªåŠ¨é‡è¯•ï¼‰
  'keyLoadError',      // å¯†é’¥åŠ è½½é”™è¯¯
  'fragParsingError',  // ç‰‡æ®µè§£æé”™è¯¯
  'fragLoadTimeOut',   // ç‰‡æ®µåŠ è½½è¶…æ—¶ï¼ˆéè‡´å‘½ï¼‰
  'levelLoadTimeOut',  // çº§åˆ«åŠ è½½è¶…æ—¶ï¼ˆéè‡´å‘½ï¼‰
  'manifestLoadTimeOut' // æ¸…å•åŠ è½½è¶…æ—¶ï¼ˆéè‡´å‘½ï¼‰
]
```

### 3. é”™è¯¯ç»Ÿè®¡ä¸ç›‘æ§
**åŠŸèƒ½**: æ™ºèƒ½é”™è¯¯ç‡ç›‘æ§å’Œç»Ÿè®¡æŠ¥å‘Š

```javascript
// é”™è¯¯ç»Ÿè®¡åŠŸèƒ½
ğŸ“Š é”™è¯¯ç»Ÿè®¡æŠ¥å‘Š: {
  æ€»é”™è¯¯æ•°: 45,
  è‡´å‘½é”™è¯¯: 2,
  ç½‘ç»œé”™è¯¯: 15,
  åª’ä½“é”™è¯¯: 8,
  ç¼“å†²é”™è¯¯: 12,
  å¿½ç•¥é”™è¯¯: 20,
  é”™è¯¯ç‡: "5/åˆ†é’Ÿ",
  æœ€è¿‘é”™è¯¯: ["fragLoadError", "bufferAppendError", "networkError"]
}
```

### 4. è‡ªé€‚åº”é”™è¯¯æ˜¾ç¤º
**åŠŸèƒ½**: æ ¹æ®é”™è¯¯é¢‘ç‡æ™ºèƒ½è°ƒæ•´æ˜¾ç¤ºç­–ç•¥

- **é”™è¯¯ç‡ > 10/åˆ†é’Ÿ**: åªæ˜¾ç¤ºè‡´å‘½é”™è¯¯
- **é”™è¯¯ç‡ > 5/åˆ†é’Ÿ**: æ˜¾ç¤ºè‡´å‘½é”™è¯¯å’ŒbufferAppendError
- **é”™è¯¯ç‡ < 5/åˆ†é’Ÿ**: æ˜¾ç¤ºå¤§éƒ¨åˆ†é”™è¯¯

### 5. HLSé…ç½®ä¼˜åŒ–
**ä¼˜åŒ–**: å‡å°‘ä¸å¿…è¦çš„é”™è¯¯å‘ç”Ÿ

```javascript
// ä¸»è¦é…ç½®æ”¹è¿›
{
  // å¢åŠ è¶…æ—¶æ—¶é—´ï¼Œå‡å°‘ç½‘ç»œé”™è¯¯
  fragLoadingTimeOut: 30000,        // 20s -> 30s
  manifestLoadingTimeOut: 20000,    // 15s -> 20s
  
  // å‡å°‘é‡è¯•æ¬¡æ•°ï¼Œè®©é”™è¯¯æ¢å¤æœºåˆ¶æ¥ç®¡
  fragLoadingMaxRetry: 3,           // 6 -> 3
  manifestLoadingMaxRetry: 2,       // 3 -> 2
  
  // æ›´ä¿å®ˆçš„è‡ªé€‚åº”æ¯”ç‰¹ç‡è®¾ç½®
  abrBandWidthFactor: 0.8,          // 0.95 -> 0.8
  
  // ç¦ç”¨å¯èƒ½å¼•èµ·é—®é¢˜çš„åŠŸèƒ½
  enableSoftwareAES: false,         // true -> false
  enableWebVTT: false,              // true -> false
}
```

## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬ä½¿ç”¨
```vue
<template>
  <VideoPlayer
    :src="videoUrl"
    :max-retry-attempts="5"
    :buffer-size="8"
    @error="handleError"
  />
</template>

<script>
export default {
  methods: {
    handleError(error) {
      console.log('æ’­æ”¾é”™è¯¯:', error.message)
      // é”™è¯¯å·²è¢«æ™ºèƒ½å¤„ç†ï¼Œé€šå¸¸ä¸éœ€è¦é¢å¤–æ“ä½œ
    }
  }
}
</script>
```

### 2. æµ‹è¯•å’Œè°ƒè¯•
ä½¿ç”¨`VideoPlayerTest.vue`ç»„ä»¶è¿›è¡Œæµ‹è¯•ï¼š

```vue
<template>
  <VideoPlayerTest />
</template>

<script>
import VideoPlayerTest from './components/VideoPlayerTest.vue'

export default {
  components: { VideoPlayerTest }
}
</script>
```

### 3. ç›‘æ§é”™è¯¯çŠ¶æ€
```javascript
// ç›‘å¬é”™è¯¯ç»Ÿè®¡
@buffer-change="onBufferChange"

methods: {
  onBufferChange(bufferInfo) {
    console.log('ç¼“å†²åŒºçŠ¶æ€:', bufferInfo.health)
    // good, fair, fragmented, starving, empty
  }
}
```

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### æ§åˆ¶å°è¾“å‡ºä¼˜åŒ–
**ä¹‹å‰**:
```
âš ï¸ HLSé”™è¯¯: [object Object]
âš ï¸ HLSé”™è¯¯: [object Object]
âš ï¸ HLSé”™è¯¯: [object Object]
```

**ç°åœ¨**:
```
âš ï¸ HLSé”™è¯¯è¯¦æƒ…: {
  type: "networkError",
  details: "fragLoadError",
  fatal: false,
  reason: "è¿æ¥è¶…æ—¶",
  url: "segment001.ts",
  errorRate: 3
}

ğŸ“Š é”™è¯¯ç»Ÿè®¡æŠ¥å‘Š: {
  æ€»é”™è¯¯æ•°: 30,
  è‡´å‘½é”™è¯¯: 1,
  ç½‘ç»œé”™è¯¯: 15,
  å¿½ç•¥é”™è¯¯: 14,
  é”™è¯¯ç‡: "3/åˆ†é’Ÿ"
}
```

### æ’­æ”¾ç¨³å®šæ€§æå‡
- âœ… å‡å°‘ä¸å¿…è¦çš„é”™è¯¯æ—¥å¿—
- âœ… æ™ºèƒ½é”™è¯¯æ¢å¤æœºåˆ¶
- âœ… æ›´ç¨³å®šçš„ç½‘ç»œå¤„ç†
- âœ… è‡ªé€‚åº”ç¼“å†²åŒºç®¡ç†

## ğŸ” æ•…éšœæ’é™¤

### å¦‚æœä»ç„¶å‡ºç°å¤§é‡é”™è¯¯ï¼š

1. **æ£€æŸ¥ç½‘ç»œè¿æ¥**
   ```bash
   # æµ‹è¯•ç½‘ç»œè¿æ¥
   ping 8.8.8.8
   ```

2. **æ£€æŸ¥è§†é¢‘æº**
   ```javascript
   // ç¡®è®¤URLæ˜¯å¦æœ‰æ•ˆ
   fetch(videoUrl).then(response => {
     console.log('è§†é¢‘æºçŠ¶æ€:', response.status)
   })
   ```

3. **è°ƒæ•´é…ç½®**
   ```vue
   <VideoPlayer
     :max-retry-attempts="10"  // å¢åŠ é‡è¯•æ¬¡æ•°
     :buffer-size="16"         // å¢åŠ ç¼“å†²åŒºå¤§å°
   />
   ```

### è°ƒè¯•æŠ€å·§

1. **å¯ç”¨è¯¦ç»†æ—¥å¿—**
   ```javascript
   // åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­
   localStorage.setItem('hls-debug', 'true')
   ```

2. **ç›‘æ§ç½‘ç»œé¢æ¿**
   - æ‰“å¼€å¼€å‘è€…å·¥å…·
   - åˆ‡æ¢åˆ°Networkæ ‡ç­¾
   - æŸ¥çœ‹è§†é¢‘ç‰‡æ®µåŠ è½½æƒ…å†µ

3. **ä½¿ç”¨æµ‹è¯•ç»„ä»¶**
   ```vue
   <VideoPlayerTest />
   ```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### å…³é”®æŒ‡æ ‡
- **é”™è¯¯ç‡**: < 5/åˆ†é’Ÿ (æ­£å¸¸)
- **è‡´å‘½é”™è¯¯**: < 1/åˆ†é’Ÿ (æ­£å¸¸)
- **ç¼“å†²åŒºå¥åº·**: good/fair (æ­£å¸¸)
- **ç½‘ç»œè´¨é‡**: good/excellent (ç†æƒ³)

### ç›‘æ§æ–¹æ³•
```javascript
// å®šæœŸæ£€æŸ¥æ’­æ”¾å™¨çŠ¶æ€
setInterval(() => {
  const stats = player.getErrorStatistics()
  console.log('æ’­æ”¾å™¨å¥åº·çŠ¶æ€:', stats)
}, 60000) // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
```

## ğŸ‰ æ€»ç»“

é€šè¿‡è¿™äº›ä¼˜åŒ–ï¼ŒVideoPlayerç°åœ¨èƒ½å¤Ÿï¼š
- ğŸ”§ æ˜¾ç¤ºæ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
- ğŸ§  æ™ºèƒ½è¿‡æ»¤ä¸é‡è¦çš„é”™è¯¯
- ğŸ“Š æä¾›è¯¦ç»†çš„é”™è¯¯ç»Ÿè®¡
- ğŸ›¡ï¸ è‡ªåŠ¨æ¢å¤æ’­æ”¾é”™è¯¯
- ğŸŒ æ›´å¥½åœ°å¤„ç†ç½‘ç»œé—®é¢˜

æ‚¨çš„æ’­æ”¾ä½“éªŒå°†æ›´åŠ ç¨³å®šï¼Œæ§åˆ¶å°ä¿¡æ¯ä¹Ÿä¼šæ›´åŠ æ¸…æ™°æ˜“æ‡‚ï¼ 